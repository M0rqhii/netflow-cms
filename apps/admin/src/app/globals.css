@tailwind base;
@tailwind components;
@tailwind utilities;

/* Design tokens */
:root {
  /* Brand */
  --color-primary: #2ea0ff;
  --color-accent: #18e7b4;
  --color-on-primary: #ffffff;
  --color-on-accent: #042318;

  /* Base palette */
  /* Brand‑tinted mint variant (less gray) */
  --background: 250, 252, 251; /* slightly off-white for better contrast */
  --surface: 241, 245, 243;    /* more distinct from background */
  --foreground: 15, 23, 42;    /* darker gray-900 for better contrast */
  --muted: 100, 116, 139;      /* slate-500 for better readability */
  --border: 226, 232, 240;     /* slate-200 - stronger border */
  --card: 255, 255, 255;       /* white for crisp cards */
  --card-border: 226, 232, 240;        /* slate-200 - more visible */
  --card-border-hover: 148, 163, 184;  /* slate-400 */
  --ring: #2ea0ff;
}

/* Dark mode (system preference) */
@media (prefers-color-scheme: dark) {
  :root {
    /* Teal‑tinted dark theme for better brand cohesion */
    --background: 8, 20, 28;   /* deeper teal for better contrast */
    --surface: 15, 35, 45;     /* more distinct from background */
    --foreground: 241, 245, 249; /* brighter white for better readability */
    --muted: 148, 163, 184;    /* slate-400 - better contrast */
    --border: 51, 65, 85;      /* slate-700 - stronger border */
    --card: 22, 45, 58;        /* more distinct from background */
    --card-border: 51, 65, 85; /* slate-700 - more visible */
    --card-border-hover: 71, 85, 105; /* slate-600 - hover edge */
    --ring: #3bb2ff;
  }
}

/* Dark mode (explicit override via data attribute) */
html[data-theme="dark"] {
  --background: 8, 20, 28;
  --surface: 15, 35, 45;
  --foreground: 241, 245, 249;
  --muted: 148, 163, 184;
  --border: 51, 65, 85;
  --card: 22, 45, 58;
  --card-border: 51, 65, 85;
  --card-border-hover: 71, 85, 105;
  --ring: #3bb2ff;
  color-scheme: dark;
}

/* Light mode (explicit override via data attribute) */
html[data-theme="light"] {
  /* Match the base light tokens to override system dark */
  --background: 250, 252, 251;
  --surface: 241, 245, 243;
  --foreground: 15, 23, 42;
  --muted: 100, 116, 139;
  --border: 226, 232, 240;
  --card: 255, 255, 255;
  --card-border: 226, 232, 240;
  --card-border-hover: 148, 163, 184;
  --ring: #2ea0ff;
  color-scheme: light;
}

@layer base {
  html { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Manrope, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
  html, body { height: 100%; }
  body { @apply bg-background text-foreground antialiased overflow-x-hidden; 
    background-color: rgb(var(--background));
    background-image:
      radial-gradient(1000px 500px at 10% -10%, rgba(46,160,255,0.06), transparent 60%),
      radial-gradient(900px 450px at 95% -5%, rgba(24,231,180,0.06), transparent 55%);
    background-attachment: fixed;
  }
  * { @apply border-border; }
}

/* Reusable utilities */
.btn {
  @apply inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 h-9 px-4 py-2 ring-offset-white;
}
.btn-primary {
  background-image: var(--grad, linear-gradient(135deg, var(--color-primary), var(--color-accent)));
  color: var(--color-on-primary);
  box-shadow: 0 6px 12px rgba(46, 160, 255, 0.25);
}
.btn-primary:hover { filter: brightness(0.98); }
.btn-outline { 
  @apply border bg-white text-gray-900 hover:bg-gray-50; 
  border-color: rgb(var(--border));
  border-width: 1px;
}
.btn-ghost { @apply text-gray-700 hover:bg-gray-100; }
.btn-danger { @apply bg-red-600 text-white hover:bg-red-700 border-red-600; }
html[data-theme="dark"] .btn-danger { @apply bg-red-700 hover:bg-red-800; }

.text-muted { color: rgb(var(--muted)); }

/* Outline btn in dark should not be glaring white */
html[data-theme="dark"] .btn-outline {
  background: transparent;
  color: rgb(var(--foreground));
  border-color: rgb(var(--border));
  border-width: 1px;
}
html[data-theme="dark"] .btn-outline:hover {
  background: rgba(255,255,255,0.08);
  border-color: rgb(var(--card-border-hover));
}

.card { 
  @apply bg-card border rounded-xl shadow-md; 
  border-color: rgb(var(--card-border));
  border-width: 1px;
  transition: box-shadow .18s cubic-bezier(0.2, 0, 0, 1), border-color .18s cubic-bezier(0.2, 0, 0, 1), transform .18s cubic-bezier(0.2, 0, 0, 1);
}
.card-interactive { cursor: pointer; }
.card-interactive:hover { 
  border-color: rgb(var(--card-border-hover)); 
  transform: translateY(-1px); 
  box-shadow: 0 10px 24px rgba(17,24,39,0.12), 0 2px 8px rgba(17,24,39,0.08); 
}
html[data-theme="dark"] .card-interactive:hover { 
  border-color: rgb(var(--card-border-hover));
  box-shadow: 0 10px 24px rgba(0,0,0,0.6), 0 2px 8px rgba(0,0,0,0.4); 
}
.card-interactive:focus-within { outline: none; box-shadow: 0 0 0 2px var(--ring); }
.card-body { @apply p-6; }
.badge { 
  @apply inline-flex items-center rounded-full border px-2 py-1 text-xs font-medium text-gray-700 bg-gray-50 whitespace-nowrap; 
  border-color: rgb(var(--border));
  border-width: 1px;
}
/* Dark theme default badge - only applies if no specific role colors are set */
html[data-theme="dark"] .badge:not([class*="!text-"]):not([class*="!bg-"]) { 
  color: rgb(203,213,225); 
  background-color: rgba(255,255,255,0.1); 
  border-color: rgb(var(--border)); 
}
.badge-sm { @apply inline-flex items-center rounded-full border px-1.5 py-0.5 text-[11px] font-medium; }

.topbar { 
  @apply border-b; 
  background-color: rgb(var(--surface)); 
  border-color: rgb(var(--border));
}
.sidebar { 
  @apply border-r; 
  background-color: rgb(var(--surface)); 
  border-color: rgb(var(--border));
}

/* Accent text and bars */
.text-gradient {
  background-image: linear-gradient(135deg, var(--color-primary), var(--color-accent));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}
.accent-bar {
  height: 2px;
  background-image: linear-gradient(135deg, var(--color-primary), var(--color-accent));
}

/* Dark-mode readability helpers */
html[data-theme="dark"] .text-gray-500 { color: rgb(148,163,184) !important; }
html[data-theme="dark"] .text-gray-600 { color: rgb(var(--muted)) !important; }
html[data-theme="dark"] a.text-gray-600:hover { color: rgb(var(--foreground)) !important; }
html[data-theme="dark"] .text-gray-700 { color: rgb(203,213,225) !important; }
html[data-theme="dark"] .text-gray-900 { color: rgb(var(--foreground)) !important; }

/* Dark mode table borders */
html[data-theme="dark"] .border-gray-200,
html[data-theme="dark"] .border-gray-300,
html[data-theme="dark"] tr.border-gray-200,
html[data-theme="dark"] tr.border-t.border-gray-200,
html[data-theme="dark"] tr.border-b.border-gray-200,
html[data-theme="dark"] tr.border-top.border-gray-200 {
  border-color: rgb(var(--border)) !important;
}

/* Dark mode backgrounds */
html[data-theme="dark"] .bg-white {
  background-color: rgb(var(--card)) !important;
}
html[data-theme="dark"] .bg-gray-50 {
  background-color: rgba(255,255,255,0.05) !important;
}
html[data-theme="dark"] .bg-gray-100 {
  background-color: rgba(255,255,255,0.08) !important;
}
html[data-theme="dark"] .bg-gray-200 {
  background-color: rgba(255,255,255,0.15) !important;
}
html[data-theme="dark"] .hover\:bg-gray-50:hover {
  background-color: rgba(255,255,255,0.08) !important;
}
html[data-theme="dark"] .hover\:bg-gray-100:hover {
  background-color: rgba(255,255,255,0.12) !important;
}

/* Dark mode borders */
html[data-theme="dark"] .border-gray-200 {
  border-color: rgb(var(--border)) !important;
}
html[data-theme="dark"] .border-gray-300 {
  border-color: rgb(var(--border)) !important;
}

/* Dark mode progress bars */
html[data-theme="dark"] .bg-gray-200 {
  background-color: rgba(255,255,255,0.12) !important;
}

/* Dark mode error messages */
html[data-theme="dark"] .text-red-600 {
  color: #f87171 !important;
}
html[data-theme="dark"] .bg-red-50 {
  background-color: rgba(239, 68, 68, 0.1) !important;
}
html[data-theme="dark"] .border-red-200 {
  border-color: rgba(239, 68, 68, 0.3) !important;
}

/* Dark mode drag and drop area */
html[data-theme="dark"] .bg-white\/40 {
  background-color: rgba(var(--card), 0.4) !important;
}

/* Dark mode input fields */
html[data-theme="dark"] input[type="text"],
html[data-theme="dark"] input[type="email"],
html[data-theme="dark"] input[type="password"],
html[data-theme="dark"] input[type="number"],
html[data-theme="dark"] textarea,
html[data-theme="dark"] select {
  background-color: rgb(var(--card)) !important;
  color: rgb(var(--foreground)) !important;
  border-color: rgb(var(--border)) !important;
  border-width: 1px !important;
}

html[data-theme="dark"] input[type="text"]:focus,
html[data-theme="dark"] input[type="email"]:focus,
html[data-theme="dark"] input[type="password"]:focus,
html[data-theme="dark"] input[type="number"]:focus,
html[data-theme="dark"] textarea:focus,
html[data-theme="dark"] select:focus {
  border-color: var(--ring) !important;
  outline-color: var(--ring) !important;
}

/* Toast dark mode */
html[data-theme="dark"] .toast .border-gray-200 {
  border-color: rgb(var(--border)) !important;
  border-width: 1px !important;
}

/* Toggle pressed state accent */
.btn[aria-pressed="true"] { box-shadow: inset 0 0 0 1px rgba(46,160,255,0.5); }

/* Navigation links (sidebar) */
.nav-link {
  @apply flex items-center gap-2 rounded-md px-3 py-2 text-sm transition-colors;
  color: rgba(var(--foreground), 0.85);
}
.nav-link:hover { 
  background-color: rgba(0,0,0,0.05); 
  color: rgb(var(--foreground));
}
html[data-theme="dark"] .nav-link { color: rgba(var(--foreground), 0.95); }
html[data-theme="dark"] .nav-link:hover { 
  background-color: rgba(255,255,255,0.1); 
  color: rgb(var(--foreground));
}
.nav-link--active {
  color: #ffffff;
  background-image: linear-gradient(135deg, var(--color-primary), var(--color-accent));
}

/* Simple tooltip using data-tip attribute (only for sidebar items) */
.sidebar .tooltip { position: relative; }
.sidebar .tooltip[data-tip]:hover::after {
  content: attr(data-tip);
  position: absolute; left: 110%; top: 50%; transform: translateY(-50%);
  white-space: nowrap; font-size: 12px; padding: 4px 8px; border-radius: 6px;
  background: rgba(0,0,0,0.8); color: #fff; pointer-events: none; z-index: 20;
}
html[data-theme="dark"] .sidebar .tooltip[data-tip]:hover::after { 
  background: rgb(var(--card)); 
  color: rgb(var(--foreground)); 
  border: 1px solid rgb(var(--border)); 
  box-shadow: 0 4px 6px -1px rgba(0,0,0,0.3);
}

/* Skeletons */
.skeleton { @apply animate-pulse rounded bg-gray-200; }
html[data-theme="dark"] .skeleton { 
  background-color: rgba(255,255,255,0.1); 
  border: 1px solid rgb(var(--border));
}

/* Small colored dot */
.dot { display:inline-block; width:8px; height:8px; border-radius:9999px; }

/* Chips */
.chip { @apply inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-medium border; }
.chip-gradient { background-image: linear-gradient(135deg, var(--color-primary), var(--color-accent)); color: #fff; border-color: transparent; }

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-4px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-fade-in {
  animation: fadeIn 0.2s ease-out;
}

/* Smooth transitions */
* {
  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 150ms;
}

/* Focus styles for accessibility */
*:focus-visible {
  outline: 2px solid var(--ring);
  outline-offset: 2px;
}

/* Screen reader only class */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only:focus,
.focus\:not-sr-only:focus {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* Responsive improvements */
@media (max-width: 768px) {
  .container {
    padding-left: 1rem;
    padding-right: 1rem;
  }
  
  .card-body {
    padding: 1rem;
  }
}


